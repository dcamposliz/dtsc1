as.POSIXlt('2015-01-01')
as.POSIXlt('2015-01-01')$mon
as.POSIXlt('2015-12-01')$mon
if(!file.exists("./data")){dir.create(".data")}
fileUrl1 = "https://dl.dropboxusercontent.com/u/7710864/data/reviews-apr29.csv"
fileUrl2 = "https://dl.dropboxusercontent.com/u/7710864/data/solutions-apr29.csv"
fileUrl1
fileUrl2
download.file(fileUrl1,destfile="./data/reviews.csv",method="curl")
download.file(fileUrl2,destfile="./data/solutions.csv",method="curl")
d2 <- Sys.Date()
weekdays(d2)
months(d2)
julian(d2)
library(xlsx)
library(dplyr)
library(lubridate)
library(xlsx)
library(dplyr)
library(lubridate)
setwd("C:/Users/Peter/myProjects/dtsc1/datai1")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = c(1,3))
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = c(1,3))
# GIVE NAMES
names(NorthAmericaPopulation) <- c("date", "population")
names(NorthAmericaGDP) <- c("date", "gdp")
#REMOVE NA VALUES
good <- complete.cases(NorthAmericaPopulation)
NorthAmericaPopulation <- NorthAmericaPopulation[good,][,]
good <- complete.cases(NorthAmericaGDP)
NorthAmericaGDP <- NorthAmericaGDP[good,][,]
NorthAmericaGDP
NorthAmericaPopulation
src(merge)
src(merge())
args(merge)
head(NorthAmericaPopulation)
head(NorthAmericaGDP)
merge(NorthAmericaPopulation,NorthAmericaGDP)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = c(1,3))
NorthAmericaPerCapitaGDP
setwd("C:/Users/Peter/myProjects/dtsc1/datai1")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = c(1,3))
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = c(1,3))
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = c(1,3))
# GIVE NAMES
names(NorthAmericaPopulation) <- c("year", "population")
names(NorthAmericaGDP) <- c("year", "gdp")
names(NorthAmericaPerCapitaGDP) <- c("year", "PerCapita GDP")
#REMOVE NA VALUES
good <- complete.cases(NorthAmericaPopulation)
NorthAmericaPopulation <- NorthAmericaPopulation[good,][,]
good <- complete.cases(NorthAmericaGDP)
NorthAmericaGDP <- NorthAmericaGDP[good,][,]
good <- complete.cases(NorthAmericaPerCapitaGDP)
NorthAmericaPerCapitaGDP <- NorthAmericaPerCapitaGDP[good,][,]
### CONVERT YEAR TO DATE
##  Add 0101 to dates  paste function
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = paste(NorthAmericaPopulation$date,"0101", sep = ""))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = paste(NorthAmericaGDP$year,"0101", sep = ""))
##  ymd read in with lubridate
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = ymd(NorthAmericaPopulation$date))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = ymd(NorthAmericaGDP$year))
##  Merge data into one set
year_fact <- merge(NorthAmericaPopulation,NorthAmericaGDP)
year_fact <- merge(year_fact,NorthAmericaPerCapitaGDP)
year_fact
setwd("C:/Users/Peter/myProjects/dtsc1/datai1")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = c(1,3))
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = c(1,3))
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = c(1,3))
# GIVE NAMES
names(NorthAmericaPopulation) <- c("year", "population")
names(NorthAmericaGDP) <- c("year", "gdp")
names(NorthAmericaPerCapitaGDP) <- c("year", "per_capita gdp")
#REMOVE NA VALUES
good <- complete.cases(NorthAmericaPopulation)
NorthAmericaPopulation <- NorthAmericaPopulation[good,][,]
good <- complete.cases(NorthAmericaGDP)
NorthAmericaGDP <- NorthAmericaGDP[good,][,]
good <- complete.cases(NorthAmericaPerCapitaGDP)
NorthAmericaPerCapitaGDP <- NorthAmericaPerCapitaGDP[good,][,]
### CONVERT YEAR TO DATE
##  Add 0101 to dates  paste function
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = paste(NorthAmericaPopulation$date,"0101", sep = ""))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = paste(NorthAmericaGDP$year,"0101", sep = ""))
##  ymd read in with lubridate
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = ymd(NorthAmericaPopulation$date))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = ymd(NorthAmericaGDP$year))
##  Merge data into one set
year_fact <- merge(NorthAmericaPopulation,NorthAmericaGDP)
year_fact <- merge(year_fact,NorthAmericaPerCapitaGDP)
year_fact
setwd("C:/Users/Peter/myProjects/dtsc1/datai1")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = c(1,3))
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = c(1,3))
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = c(1,3))
# GIVE NAMES
names(NorthAmericaPopulation) <- c("year", "population")
names(NorthAmericaGDP) <- c("year", "gdp")
names(NorthAmericaPerCapitaGDP) <- c("year", "per_capita gdp")
#REMOVE NA VALUES
good <- complete.cases(NorthAmericaPopulation)
NorthAmericaPopulation <- NorthAmericaPopulation[good,][,]
good <- complete.cases(NorthAmericaGDP)
NorthAmericaGDP <- NorthAmericaGDP[good,][,]
good <- complete.cases(NorthAmericaPerCapitaGDP)
NorthAmericaPerCapitaGDP <- NorthAmericaPerCapitaGDP[good,][,]
# Convert to correct units
NorthAmericaPopulation <- mutate(NorthAmericaPopulation, population = population * 1000)
NorthAmericaGDP <- mutate(NorthAmericaGDP, gdp = gdp * 1000000)
### CONVERT YEAR TO DATE
##  Add 0101 to dates  paste function
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = paste(NorthAmericaPopulation$date,"0101", sep = ""))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = paste(NorthAmericaGDP$year,"0101", sep = ""))
##  ymd read in with lubridate
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = ymd(NorthAmericaPopulation$date))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = ymd(NorthAmericaGDP$year))
##  Merge data into one set
year_fact <- merge(NorthAmericaPopulation,NorthAmericaGDP)
year_fact <- merge(year_fact,NorthAmericaPerCapitaGDP)
year_fact
c(1:13,16,17)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = c(1:13,16,17))
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = c(1:13,16,17))
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = c(1:13,16,17))
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Ireland","Greece","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Ireland","Greece","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Ireland","Greece","Portugal","Spain")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
EuropePopulation
t(EuropePopulation)
stack(EuropePopulation)
good <- complete.cases(EuropePopulation)
EuropePopulation <- EuropePopulation[good,][,]
good <- complete.cases(EuropeGDP)
EuropeGDP <- EuropeGDP[good,][,]
good <- complete.cases(EuropePerCapitaGDP)
EuropePerCapitaGDP <- EuropePerCapitaGDP[good,][,]
stack(EuropePopulation)
exampleMelt <- melt(EuropePopulation,id="year",vars="Austria")
install.packages("reshape2")
library(reshape2)
exampleMelt <- melt(EuropePopulation,id="year",vars="Austria")
exampleMelt
exampleMelt <- melt(EuropePopulation,id="year")
head(exampleMelt)
exampleMelt
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = 1:3)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = 1:3)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = 1:3)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = c(1:13,16,17))
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = c(1:13,16,17))
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = c(1:13,16,17))
# GIVE NAMES
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
NorthAmericaPerCapitaGDP
#REMOVE NA VALUES
good <- complete.cases(NorthAmericaPopulation)
NorthAmericaPopulation <- NorthAmericaPopulation[good,][,]
good <- complete.cases(NorthAmericaGDP)
NorthAmericaGDP <- NorthAmericaGDP[good,][,]
good <- complete.cases(NorthAmericaPerCapitaGDP)
NorthAmericaPerCapitaGDP <- NorthAmericaPerCapitaGDP[good,][,]
good <- complete.cases(EuropePopulation)
EuropePopulation <- EuropePopulation[good,][,]
good <- complete.cases(EuropeGDP)
EuropeGDP <- EuropeGDP[good,][,]
good <- complete.cases(EuropePerCapitaGDP)
EuropePerCapitaGDP <- EuropePerCapitaGDP[good,][,]
head(EuropePopulation)
setwd("C:/Users/Peter/myProjects/dtsc1/datai1")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = 1:3)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = 1:3)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = 1:3)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 13, colIndex = c(1:13,16,17))
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 13, colIndex = c(1:13,16,17))
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 13, colIndex = c(1:13,16,17))
# GIVE NAMES
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
#REMOVE NA VALUES
good <- complete.cases(NorthAmericaPopulation)
NorthAmericaPopulation <- NorthAmericaPopulation[good,][,]
good <- complete.cases(NorthAmericaGDP)
NorthAmericaGDP <- NorthAmericaGDP[good,][,]
good <- complete.cases(NorthAmericaPerCapitaGDP)
NorthAmericaPerCapitaGDP <- NorthAmericaPerCapitaGDP[good,][,]
good <- complete.cases(EuropePopulation)
EuropePopulation <- EuropePopulation[good,][,]
good <- complete.cases(EuropeGDP)
EuropeGDP <- EuropeGDP[good,][,]
good <- complete.cases(EuropePerCapitaGDP)
EuropePerCapitaGDP <- EuropePerCapitaGDP[good,][,]
head(EuropePerCapitaGDP)
NorthAmericaPopulationMelt <- melt(NorthAmericaPopulation,id="year")
head(NorthAmericaPopulationMelt)
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 14, endRow = 203, colIndex = 1:3)
NorthAmericaPopulation
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 203, colIndex = 1:3)
NorthAmericaPopulation
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 203, colIndex = 1:3, header=FALSE)
NorthAmericaPopulation
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 203, colIndex = 1:3, header=FALSE)
NorthAmericaPopulation
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 203, colIndex = 1:3, header=FALSE)
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPopulation
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
# GIVE NAMES BEFORE MELT
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
NorthAmericaGDP
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
# GIVE NAMES BEFORE MELT
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
NorthAmericaPopulationMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaGDPMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaPerCapitaGDPMelt <- melt(NorthAmericaPopulation,id="year")
EuropePopulationMelt <- melt(EuropePopulation,id="year")
EuropeGDPMelt <- melt(EuropePopulation,id="year")
EuropePerCapitaGDPMelt <- melt(EuropeaPopulation,id="year")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
# GIVE NAMES BEFORE MELT
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
## Melt down to 3 columns each
NorthAmericaPopulationMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaGDPMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaPerCapitaGDPMelt <- melt(NorthAmericaPopulation,id="year")
EuropePopulationMelt <- melt(EuropePopulation,id="year")
EuropeGDPMelt <- melt(EuropeGDP,id="year")
EuropePerCapitaGDPMelt <- melt(EuropePerCapitaGDP,id="year")
class(EuropePerCapitaGDP)
class(EuropePerCapitaGDP$year)
class(EuropePerCapitaGDP$Austria)
class(EuropePerCapitaGDP$Finland)
EuropePerCapitaGDPMelt
tail(EuropePerCapitaGDPMelt)
EuropePerCapitaGDPMelt$value
is.na(EuropePerCapitaGDPMelt$value)
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
# GIVE NAMES BEFORE MELT
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
## Melt down to 3 columns each
NorthAmericaPopulationMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaGDPMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaPerCapitaGDPMelt <- melt(NorthAmericaPopulation,id="year")
EuropePopulationMelt <- melt(EuropePopulation,id="year")
EuropeGDPMelt <- melt(EuropeGDP,id="year")
EuropePerCapitaGDPMelt <- melt(EuropePerCapitaGDP,id="year")
## RENAME COLUMNS AFTER MELTING
names(NorthAmericaPopulationMelt) <- c("year", "country", "population")
names(NorthAmericaGDPMelt) <- c("year", "country", "gdp")
names(NorthAmericaPerCapitaGDPMelt) <- c("year", "country", "per_capita_gdp")
names(EuropePopulationMelt) <- c("year", "country", "population")
names(EuropeGDPMelt) <- c("year", "country", "gdp")
names(EuropePerCapitaGDPMelt) <- c("year", "country", "per_capita_gdp")
EuropePopulationMelt
head(EuropePopulationMelt)
NorthAmericaPopulationMelt <- mutate(NorthAmericaPopulation, population = population * 1000)
NorthAmericaGDPMelt <- mutate(NorthAmericaGDP, gdp = gdp * 1000000)
EuropePopulationMelt <- mutate(EuropePopulation, population = population * 1000)
EuropeGDPMelt <- mutate(EuropeGDP, gdp = gdp * 1000000)
### CONVERT YEAR TO DATE
##  Add 0101 to dates  paste function
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = paste(NorthAmericaPopulation$date,"0101", sep = ""))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = paste(NorthAmericaGDP$year,"0101", sep = ""))
##  ymd read in with lubridate
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = ymd(NorthAmericaPopulation$date))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = ymd(NorthAmericaGDP$year))
##  Merge data into one set
year_fact1 <- merge(NorthAmericaPopulationMelt,NorthAmericaGDPMelt)
year_fact1 <- merge(year_fact,NorthAmericaPerCapitaGDPMelt)
year_fact2 <- merge(EuropePopulationMelt,EuropeGDPMelt)
year_fact2 <- merge(year_fact,EuropePerCapitaGDPMelt)
head(NorthAmericaPopulationMelt)
NorthAmericaPopulationMelt <- mutate(NorthAmericaPopulation, population = population * 1000)
NorthAmericaPopulationMelt <- mutate(NorthAmericaPopulationMelt, population = population * 1000)
NorthAmericaGDPMelt <- mutate(NorthAmericaGDPMelt, gdp = gdp * 1000000)
EuropePopulationMelt <- mutate(EuropePopulationMelt, population = population * 1000)
EuropeGDPMelt <- mutate(EuropeGDPMelt, gdp = gdp * 1000000)
### CONVERT YEAR TO DATE
##  Add 0101 to dates  paste function
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = paste(NorthAmericaPopulation$date,"0101", sep = ""))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = paste(NorthAmericaGDP$year,"0101", sep = ""))
##  ymd read in with lubridate
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = ymd(NorthAmericaPopulation$date))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = ymd(NorthAmericaGDP$year))
##  Merge data into one set
year_fact1 <- merge(NorthAmericaPopulationMelt,NorthAmericaGDPMelt)
year_fact1 <- merge(year_fact,NorthAmericaPerCapitaGDPMelt)
year_fact2 <- merge(EuropePopulationMelt,EuropeGDPMelt)
year_fact2 <- merge(year_fact,EuropePerCapitaGDPMelt)
head(year_fact1)
tail(year_fact1)
setwd("C:/Users/Peter/myProjects/dtsc1/datai1")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
# GIVE NAMES BEFORE MELT
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
## Melt down to 3 columns each
NorthAmericaPopulationMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaGDPMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaPerCapitaGDPMelt <- melt(NorthAmericaPopulation,id="year")
EuropePopulationMelt <- melt(EuropePopulation,id="year")
EuropeGDPMelt <- melt(EuropeGDP,id="year")
EuropePerCapitaGDPMelt <- melt(EuropePerCapitaGDP,id="year")
## RENAME COLUMNS AFTER MELTING
names(NorthAmericaPopulationMelt) <- c("year", "country", "population")
names(NorthAmericaGDPMelt) <- c("year", "country", "gdp")
names(NorthAmericaPerCapitaGDPMelt) <- c("year", "country", "per_capita_gdp")
names(EuropePopulationMelt) <- c("year", "country", "population")
names(EuropeGDPMelt) <- c("year", "country", "gdp")
names(EuropePerCapitaGDPMelt) <- c("year", "country", "per_capita_gdp")
#REMOVE NA VALUES (Not Needed)
#good <- complete.cases(NorthAmericaPopulationMelt)
#NorthAmericaPopulationMelt <- NorthAmericaPopulationMelt[good,][,]
#good <- complete.cases(NorthAmericaGDPMelt)
#NorthAmericaGDPMelt <- NorthAmericaGDPMelt[good,][,]
#good <- complete.cases(NorthAmericaPerCapitaGDPMelt)
#NorthAmericaPerCapitaGDPMelt <- NorthAmericaPerCapitaGDPMelt[good,][,]
#good <- complete.cases(EuropePopulationMelt)
#EuropePopulationMelt <- EuropePopulationMelt[good,][,]
#good <- complete.cases(EuropeGDPMelt)
#EuropeGDPMelt <- EuropeGDPMelt[good,][,]
#good <- complete.cases(EuropePerCapitaGDP)
#EuropePerCapitaGDP <- EuropePerCapitaGDP[good,][,]
# Convert to correct units
NorthAmericaPopulationMelt <- mutate(NorthAmericaPopulationMelt, population = population * 1000)
NorthAmericaGDPMelt <- mutate(NorthAmericaGDPMelt, gdp = gdp * 1000000)
EuropePopulationMelt <- mutate(EuropePopulationMelt, population = population * 1000)
EuropeGDPMelt <- mutate(EuropeGDPMelt, gdp = gdp * 1000000)
### CONVERT YEAR TO DATE
##  Add 0101 to dates  paste function
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = paste(NorthAmericaPopulation$date,"0101", sep = ""))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = paste(NorthAmericaGDP$year,"0101", sep = ""))
##  ymd read in with lubridate
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = ymd(NorthAmericaPopulation$date))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = ymd(NorthAmericaGDP$year))
##  Merge data into one set
year_fact1 <- merge(NorthAmericaPopulationMelt,NorthAmericaGDPMelt)
year_fact1 <- merge(year_fact,NorthAmericaPerCapitaGDPMelt)
year_fact2 <- merge(EuropePopulationMelt,EuropeGDPMelt)
year_fact2 <- merge(year_fact,EuropePerCapitaGDPMelt)
head(year_fact1)
year_fact1 <- merge(NorthAmericaPopulationMelt,NorthAmericaGDPMelt)
head(year_fact1)
head(NorthAmericaPerCapitaGDPMelt)
year_fact1test <- merge(year_fact,NorthAmericaPerCapitaGDPMelt)
year_fact1test
head(year_fact1test)
head(year_fact)
head(NorthAmericaPerCapitaGDPMelt)
NorthAmericaPopulationMelt
head(NorthAmericaPopulationMelt)
head(NorthAmericaGDPMelt)
year_fact1 <- merge(NorthAmericaPopulationMelt,NorthAmericaGDPMelt)
head(year_fact1)
year_fact1 <- merge(year_fact,NorthAmericaPerCapitaGDPMelt)
setwd("C:/Users/Peter/myProjects/dtsc1/datai1")
# LOAD DATA
NorthAmericaPopulation <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
NorthAmericaPerCapitaGDP <- read.xlsx2("./Maddison_NorthAmerica_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = 1:3, header=FALSE)
EuropePopulation <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=2, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropeGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=3, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
EuropePerCapitaGDP <- read.xlsx2("./Maddison_Europe_Full.xlsx", sheetIndex=4, startRow = 64, endRow = 202, colIndex = c(1:13,16,17), header=FALSE)
# GIVE NAMES BEFORE MELT
names(NorthAmericaPopulation) <- c("year", "canada","usa")
names(NorthAmericaGDP) <- c("year", "canada", "usa")
names(NorthAmericaPerCapitaGDP) <- c("year", "canada", "usa")
names(EuropePopulation) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropeGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
names(EuropePerCapitaGDP) <- c("year", "Austria","Belgium","Denmark","Finland","France","Germany","Italy","Netherlands","Norway","Sweden","Switzerland","UK","Portugal","Spain")
## Melt down to 3 columns each
NorthAmericaPopulationMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaGDPMelt <- melt(NorthAmericaPopulation,id="year")
NorthAmericaPerCapitaGDPMelt <- melt(NorthAmericaPopulation,id="year")
EuropePopulationMelt <- melt(EuropePopulation,id="year")
EuropeGDPMelt <- melt(EuropeGDP,id="year")
EuropePerCapitaGDPMelt <- melt(EuropePerCapitaGDP,id="year")
## RENAME COLUMNS AFTER MELTING
names(NorthAmericaPopulationMelt) <- c("year", "country", "population")
names(NorthAmericaGDPMelt) <- c("year", "country", "gdp")
names(NorthAmericaPerCapitaGDPMelt) <- c("year", "country", "per_capita_gdp")
names(EuropePopulationMelt) <- c("year", "country", "population")
names(EuropeGDPMelt) <- c("year", "country", "gdp")
names(EuropePerCapitaGDPMelt) <- c("year", "country", "per_capita_gdp")
#REMOVE NA VALUES (Not Needed)
#good <- complete.cases(NorthAmericaPopulationMelt)
#NorthAmericaPopulationMelt <- NorthAmericaPopulationMelt[good,][,]
#good <- complete.cases(NorthAmericaGDPMelt)
#NorthAmericaGDPMelt <- NorthAmericaGDPMelt[good,][,]
#good <- complete.cases(NorthAmericaPerCapitaGDPMelt)
#NorthAmericaPerCapitaGDPMelt <- NorthAmericaPerCapitaGDPMelt[good,][,]
#good <- complete.cases(EuropePopulationMelt)
#EuropePopulationMelt <- EuropePopulationMelt[good,][,]
#good <- complete.cases(EuropeGDPMelt)
#EuropeGDPMelt <- EuropeGDPMelt[good,][,]
#good <- complete.cases(EuropePerCapitaGDP)
#EuropePerCapitaGDP <- EuropePerCapitaGDP[good,][,]
# Convert to correct units
NorthAmericaPopulationMelt <- mutate(NorthAmericaPopulationMelt, population = population * 1000)
NorthAmericaGDPMelt <- mutate(NorthAmericaGDPMelt, gdp = gdp * 1000000)
EuropePopulationMelt <- mutate(EuropePopulationMelt, population = population * 1000)
EuropeGDPMelt <- mutate(EuropeGDPMelt, gdp = gdp * 1000000)
### CONVERT YEAR TO DATE
##  Add 0101 to dates  paste function
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = paste(NorthAmericaPopulation$date,"0101", sep = ""))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = paste(NorthAmericaGDP$year,"0101", sep = ""))
##  ymd read in with lubridate
#NorthAmericaPopulation <- mutate(NorthAmericaPopulation, year = ymd(NorthAmericaPopulation$date))
#NorthAmericaGDP <- mutate(NorthAmericaGDP, year = ymd(NorthAmericaGDP$year))
##  Merge data into one set
year_fact1 <- merge(NorthAmericaPopulationMelt,NorthAmericaGDPMelt)
year_fact1 <- merge(year_fact1,NorthAmericaPerCapitaGDPMelt)
year_fact2 <- merge(EuropePopulationMelt,EuropeGDPMelt)
year_fact2 <- merge(year_fact2,EuropePerCapitaGDPMelt)
head(year_fact1)
tail(year_fact1)
head(year_fact2)
tail(year_fact2)
write(year_fact1, file = "./year_fact1", append = FALSE)
write(year_fact1, file = "./year_fact1")
write.table(year_fact1, file = "./year_fact1")
write.table(year_fact2, file = "./year_fact2")
write.csv(year_fact1, file = "./year_fact1")
write.csv(year_fact2, file = "./year_fact2")
write.csv(year_fact1, file = "./year_fact1")
write.csv(year_fact2, file = "./year_fact2")
write.table(year_fact1, file = "./year_fact1", sep = ",", quote = FALSE)
write.table(year_fact1, file = "./year_fact1", sep = ",", quote = FALSE)
write.xlsx(year_fact1, file = "./year_fact1", sep = ",", quote = FALSE)
write.xlsx(year_fact1, file = "./year_fact1")
write.xlsx(year_fact1, "./year_fact1")
write.table(year_fact1, "./year_fact1")
write.xlsx(data.frame(year_fact1), "./year_fact1")
write.table(year_fact1, "./year_fact1.csv")
write.csv2(year_fact1, "./year_fact1.csv")
write.csv2(year_fact1, "./year_fact1.csv")
write.csv2(year_fact1, "./year_fact1.csv")
write.csv2(year_fact1, "./year_fact1.csv")
write.csv(year_fact1, "./year_fact1.csv")
write.table(year_fact1, "./year_fact1.csv", sep = "\t")
write.table(year_fact1, "./year_fact1.csv", sep = "\t", header=TRUE)
write.table(year_fact1, "./year_fact1.csv", sep = "\t", col.names=TRUE)
write.table(year_fact1, "./year_fact1.csv", sep = "\t", col.names=NA)
write.table(year_fact2, "./year_fact2.csv", sep = "\t", col.names=NA)
